<br>
<div class="container">
    <div class="row">
        <div class="col-md-9 col-sm-12">
            <h1 class="panel-title-style display-3">Perfil</h1>
        </div>
        <div class="col-md-3 col-sm-12">
            <br>
            <ng-container *ngIf='!editable$; else editing'>
                <button class="btn btn-secondary btn-block" (click) = 'enableEditar()'>Editar</button>
            </ng-container>
            <ng-template #editing>
                    <button class="btn btn-primary btn-block" (click) = 'guardarCambios(fregistro.value, fnombre.value, fcontrasenia.value, fcorreo.value, ftelefono.value, ffotografia.value)'>Guardar Cambios</button>
            </ng-template>
        </div>
    </div>
</div>
<!-- #region USUARIO-->
<div class="container">
    <br>
    <img src="http://localhost:3000/comunity-usac/api/usuario-imagen/{{registro}}" width="200" height="200" class="rounded mx-auto d-block">
    <div class="row justify-content-center">
        <div class="col-sm-12 col-md-6">
            <form enctype="multipart/form-data">                 
                <div class="form-group">
                    <label>Registro</label>
                    <input #fregistro type="number" class="form-control" placeholder="Registro" disabled value="{{ usr.registro }}">
                </div>
                <div class="form-group">
                    <label>Nombre</label>
                    <input #fnombre type="text" class="form-control" placeholder="Nombre" [disabled]="!editable$" value="{{ usr.nombre }}">
                </div> 
                <div class="form-group">
                    <label>Contaseña</label>
                    <input #fcontrasenia type="password" class="form-control" placeholder="Contraseña" [disabled]="!editable$" value="{{ usr.constrasenia }}">
                </div> 
                <div class="form-group">
                    <label>Correo</label>
                    <input #fcorreo type="email" class="form-control" placeholder="Correo" [disabled]="!editable$" value="{{ usr.correo }}">
                </div> 
                <div class="form-group">
                    <label>Teléfono</label>
                    <input #ftelefono type="number" class="form-control" placeholder="Teléfono" [disabled]="!editable$" value="{{ usr.telefono }}">
                </div>
                <div class="form-group" [hidden]="!editable$">
                    <label>Fotografia</label>
                    <p class="text-muted">*Opcional</p>
                    <input #ffotografia (change)="fileChange($event)" type="file" class="form-control"  placeholder="Teléfono">
                </div>
            </form>
        </div>
    </div>
</div>
<div class="container">
    <div class="row">
        <ng-container *ngIf = "usr.ciencias">
            <ng-container *ngIf = "usr.ciencias.length != 0; else notTeacher">
                <div class="col-md-3 col-sm-12">
                    <h1 class="panel-title-style display-5">Roles</h1>
                    <p class="text-muted">Roles que ejerce.</p>
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <tr class="bg-secondary">
                                    <th class="text-light" scope="col">Rol</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor = 'let r of usr.roles'>
                                    <td>{{ r.rol }}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="col-md-5 col-sm-12">
                    <h1 class="panel-title-style display-5">Facultades/Carreras</h1>
                    <p class="text-muted">Facultades y Carreras donde participa.</p>
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <tr class="bg-secondary">
                                    <th class="text-light" scope="col">Facultad</th>
                                    <th class="text-light" scope="col">Carrera</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor = 'let ca of usr.carreras'>
                                    <td>{{ ca.facultad }}</td>
                                    <td>{{ ca.carrera }}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="col-md-4 col-sm-12">
                    <h1 class="panel-title-style display-5">Ciencias</h1>
                    <p class="text-muted">Ciencias en las que da clase.</p>
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <tr class="bg-secondary">
                                    <th class="text-light" scope="col">Carrera</th>
                                    <th class="text-light" scope="col">Ciencia</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor = 'let ciencia of usr.ciencias'>
                                    <td>{{ ciencia.carrera }}</td>
                                    <td>{{ ciencia.ciencia }}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </ng-container>
            <ng-template #notTeacher>
                <div class="col-md-6 col-sm-12">
                    <h1 class="panel-title-style display-5">Roles</h1>
                    <p class="text-muted">Roles que ejerce.</p>
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <tr class="bg-secondary">
                                    <th class="text-light" scope="col">Rol</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor = 'let r of usr.roles'>
                                    <td>{{ r.rol }}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="col-md-6 col-sm-12">
                    <h1 class="panel-title-style display-5">Facultades/Carreras</h1>
                    <p class="text-muted">Facultades y Carreras donde participa.</p>
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <tr class="bg-secondary">
                                    <th class="text-light" scope="col">Facultad</th>
                                    <th class="text-light" scope="col">Carrera</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor = 'let ca of usr.carreras'>
                                    <td>{{ ca.facultad }}</td>
                                    <td>{{ ca.carrera }}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </ng-template>
        </ng-container>
    </div>
</div>
<br>